<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>BRV Hub â€” AI Agent Content Registry</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=IBM+Plex+Mono:wght@400;500;600&display=swap"
            rel="stylesheet"
        />
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ['"DM Sans"', "sans-serif"],
                            mono: ['"IBM Plex Mono"', "monospace"],
                        },
                        colors: {
                            brv: {
                                bg: "#09090b",
                                surface: "#111113",
                                "surface-raised": "#19191d",
                                border: "#1e1e24",
                                "border-light": "#2a2a33",
                                muted: "#9b9bb0",
                                dim: "#6e6e88",
                                primary: "#10b96e",
                                "primary-glow": "rgba(16, 185, 110, 0.15)",
                                blue: "#636bff",
                                "blue-glow": "rgba(99, 107, 255, 0.15)",
                            },
                        },
                    },
                },
            };
        </script>
        <style>
            * {
                box-sizing: border-box;
            }

            body {
                font-family: "DM Sans", sans-serif;
                background: #09090b;
                color: #e0e0ee;
            }

            /* Noise texture overlay */
            body::before {
                content: "";
                position: fixed;
                inset: 0;
                z-index: 9999;
                pointer-events: none;
                opacity: 0.025;
                background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
                background-repeat: repeat;
                background-size: 256px;
            }

            /* Scrollbar */
            ::-webkit-scrollbar {
                width: 6px;
            }
            ::-webkit-scrollbar-track {
                background: transparent;
            }
            ::-webkit-scrollbar-thumb {
                background: #2a2a33;
                border-radius: 3px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #3a3a4a;
            }

            /* Header gradient mesh */
            .header-bg {
                position: relative;
                overflow: hidden;
            }
            .header-bg::before {
                content: "";
                position: absolute;
                top: -60%;
                left: -20%;
                width: 60%;
                height: 220%;
                background: radial-gradient(
                    ellipse,
                    rgba(16, 185, 110, 0.06) 0%,
                    transparent 70%
                );
                pointer-events: none;
            }
            .header-bg::after {
                content: "";
                position: absolute;
                top: -40%;
                right: -10%;
                width: 50%;
                height: 200%;
                background: radial-gradient(
                    ellipse,
                    rgba(99, 107, 255, 0.04) 0%,
                    transparent 70%
                );
                pointer-events: none;
            }

            /* Cards */
            .entry-card {
                position: relative;
                transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
                animation: card-in 0.4s cubic-bezier(0.22, 1, 0.36, 1) backwards;
            }
            .entry-card::before {
                content: "";
                position: absolute;
                left: 0;
                top: 12px;
                bottom: 12px;
                width: 2px;
                border-radius: 1px;
                opacity: 0.6;
                transition: opacity 0.25s ease;
            }
            .entry-card[data-type="agent-skill"]::before {
                background: #10b96e;
            }
            .entry-card[data-type="bundle"]::before {
                background: #636bff;
            }
            .entry-card:hover {
                border-color: #2a2a33;
                background: #15151a;
                transform: translateY(-1px);
                box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.5);
            }
            .entry-card:hover::before {
                opacity: 1;
            }

            @keyframes card-in {
                from {
                    opacity: 0;
                    transform: translateY(12px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Filter buttons */
            .filter-btn {
                transition: all 0.2s cubic-bezier(0.22, 1, 0.36, 1);
            }
            .filter-btn.active {
                background: #ffffff;
                color: #09090b;
                font-weight: 600;
                box-shadow: 0 0 12px rgba(255, 255, 255, 0.08);
            }
            .filter-btn:not(.active):hover {
                background: #19191d;
                color: #e0e0ee;
            }

            /* Search glow */
            .search-input:focus {
                border-color: #10b96e;
                box-shadow:
                    0 0 0 3px rgba(16, 185, 110, 0.1),
                    0 0 20px rgba(16, 185, 110, 0.05);
            }

            /* Tags */
            .tag-pill {
                transition: all 0.15s ease;
            }
            .tag-pill:hover {
                border-color: #3a3a4a;
                color: #c0c0d0;
            }

            /* Install button */
            .install-btn {
                transition: all 0.2s cubic-bezier(0.22, 1, 0.36, 1);
            }
            .install-btn:hover {
                background: #10b96e;
                border-color: #10b96e;
                color: #ffffff;
                box-shadow: 0 0 16px rgba(16, 185, 110, 0.2);
            }

            /* Category select */
            .category-select {
                appearance: none;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364647a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 12px center;
                padding-right: 32px;
            }

            /* Toast */
            .copy-toast {
                animation:
                    toast-in 0.25s cubic-bezier(0.22, 1, 0.36, 1),
                    toast-out 0.25s ease 1.3s forwards;
            }
            @keyframes toast-in {
                from {
                    opacity: 0;
                    transform: translate(-50%, 10px);
                }
                to {
                    opacity: 1;
                    transform: translate(-50%, 0);
                }
            }
            @keyframes toast-out {
                from {
                    opacity: 1;
                }
                to {
                    opacity: 0;
                }
            }

            /* Agent compatibility dots */
            .agent-dot {
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #3a3a4a;
                transition: background 0.15s ease;
            }
            .entry-card:hover .agent-dot {
                background: #6e6e88;
            }

            /* Stat pill in header */
            .stat-pill {
                background: rgba(255, 255, 255, 0.04);
                border: 1px solid rgba(255, 255, 255, 0.06);
                backdrop-filter: blur(8px);
            }

            /* Grid line decoration */
            .grid-line {
                background: linear-gradient(
                    90deg,
                    transparent,
                    #1e1e24 50%,
                    transparent
                );
                height: 1px;
            }
        </style>
    </head>
    <body class="min-h-screen">
        <!-- Header -->
        <header class="header-bg border-b border-brv-border">
            <div
                class="max-w-6xl mx-auto px-6 sm:px-8 pt-12 pb-10 relative z-10"
            >
                <div class="flex items-start justify-between">
                    <div>
                        <div class="flex items-center gap-3.5 mb-5">
                            <img
                                src="https://app.byterover.dev/img/byterover_logo.png"
                                alt="BRV Hub"
                                class="w-12 h-12 rounded-lg shadow-[0_0_24px_rgba(255,255,255,0.06)]"
                            />
                            <div>
                                <h1
                                    class="font-sans font-bold text-[24px] tracking-tight text-white leading-none"
                                >
                                    BRV Hub
                                </h1>
                                <p
                                    class="text-[11px] font-mono text-brv-dim mt-0.5 tracking-wide uppercase"
                                >
                                    Registry
                                </p>
                            </div>
                        </div>
                        <p
                            class="text-brv-muted text-[15px] max-w-md leading-relaxed"
                        >
                            Community-driven registry for AI coding agent
                            content.<br />
                            Browse and install skills, bundles, and more.
                        </p>
                    </div>
                    <div class="flex items-center gap-4 mt-1">
                        <div
                            class="stat-pill rounded-full px-3.5 py-1.5 flex items-center gap-2"
                        >
                            <span
                                class="w-1.5 h-1.5 rounded-full bg-brv-primary animate-pulse"
                            ></span>
                            <span
                                id="header-count"
                                class="text-[12px] font-mono text-brv-muted"
                                >0 entries</span
                            >
                        </div>
                        <a
                            href="https://github.com/campfirein/brv-hub"
                            target="_blank"
                            rel="noopener"
                            class="w-9 h-9 rounded-lg border border-brv-border flex items-center justify-center text-brv-muted hover:text-white hover:border-brv-border-light transition-all"
                        >
                            <svg
                                width="18"
                                height="18"
                                viewBox="0 0 24 24"
                                fill="currentColor"
                            >
                                <path
                                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                                />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Controls -->
        <section class="max-w-6xl mx-auto px-6 sm:px-8 pt-8 pb-2">
            <div class="flex flex-col sm:flex-row gap-3">
                <!-- Search -->
                <div class="relative flex-1">
                    <svg
                        class="absolute left-3.5 top-1/2 -translate-y-1/2 text-brv-dim"
                        width="15"
                        height="15"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input
                        id="search"
                        type="text"
                        placeholder="Search skills, bundles, tags..."
                        class="search-input w-full bg-brv-surface border border-brv-border rounded-lg pl-10 pr-4 py-2.5 text-sm text-[#d1d1e0] placeholder-brv-dim outline-none transition-all font-sans"
                    />
                </div>

                <!-- Type filter -->
                <div
                    class="flex gap-1 bg-brv-surface border border-brv-border rounded-lg p-1"
                >
                    <button
                        data-type="all"
                        class="filter-btn active px-4 py-1.5 rounded-md text-xs text-brv-muted font-medium"
                    >
                        All
                    </button>
                    <button
                        data-type="agent-skill"
                        class="filter-btn px-4 py-1.5 rounded-md text-xs text-brv-muted font-medium"
                    >
                        Skills
                    </button>
                    <button
                        data-type="bundle"
                        class="filter-btn px-4 py-1.5 rounded-md text-xs text-brv-muted font-medium"
                    >
                        Bundles
                    </button>
                </div>

                <!-- Category filter -->
                <select
                    id="category-filter"
                    class="category-select bg-brv-surface border border-brv-border rounded-lg px-3.5 py-2.5 text-xs text-brv-muted outline-none focus:border-brv-primary transition-colors cursor-pointer font-medium"
                >
                    <option value="all">All categories</option>
                </select>
            </div>
        </section>

        <!-- Results count -->
        <section class="max-w-6xl mx-auto px-6 sm:px-8 py-3">
            <p
                id="results-count"
                class="text-[12px] font-mono text-brv-dim"
            ></p>
        </section>

        <!-- Grid line -->
        <div class="max-w-6xl mx-auto px-6 sm:px-8 mb-1">
            <div class="grid-line"></div>
        </div>

        <!-- Entries grid -->
        <main class="max-w-6xl mx-auto px-6 sm:px-8 pb-24 pt-4">
            <div
                id="entries-grid"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"
            ></div>
            <div id="empty-state" class="hidden text-center py-28">
                <div class="inline-flex flex-col items-center gap-3">
                    <svg
                        class="text-brv-dim"
                        width="32"
                        height="32"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        <line x1="8" y1="11" x2="14" y2="11"></line>
                    </svg>
                    <p class="text-brv-dim text-sm">
                        No entries match your filters.
                    </p>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="border-t border-brv-border">
            <div
                class="max-w-6xl mx-auto px-6 sm:px-8 py-6 flex items-center justify-between"
            >
                <p class="text-[12px] font-mono text-brv-dim">
                    BRV Hub &middot; MIT License
                </p>
                <p
                    id="footer-generated"
                    class="text-[12px] font-mono text-brv-dim"
                ></p>
            </div>
        </footer>

        <script>
            const CATEGORY_LABELS = {
                productivity: "Productivity",
                "code-quality": "Code Quality",
                testing: "Testing",
                documentation: "Documentation",
                refactoring: "Refactoring",
                debugging: "Debugging",
                deployment: "Deployment",
                analysis: "Analysis",
                security: "Security",
                learning: "Learning",
            };

            const TYPE_CONFIG = {
                "agent-skill": {
                    label: "skill",
                    bg: "#10b96e",
                    text: "#ffffff",
                    glow: "rgba(16, 185, 110, 0.12)",
                },
                bundle: {
                    label: "bundle",
                    bg: "#636bff",
                    text: "#ffffff",
                    glow: "rgba(99, 107, 255, 0.12)",
                },
            };

            let allEntries = [];
            let activeType = "all";
            let activeCategory = "all";
            let searchQuery = "";

            async function init() {
                try {
                    const res = await fetch("./registry.json");
                    const registry = await res.json();
                    allEntries = registry.entries;

                    document.getElementById("header-count").textContent =
                        `${registry.count} entries`;
                    document.getElementById("footer-generated").textContent =
                        `Registry v${registry.version}`;

                    populateCategories();
                    render();
                    bindEvents();
                } catch (err) {
                    document.getElementById("entries-grid").innerHTML =
                        `<p class="text-red-400 text-sm col-span-3">Failed to load registry.json</p>`;
                }
            }

            function populateCategories() {
                const cats = [
                    ...new Set(allEntries.map((e) => e.category)),
                ].sort();
                const select = document.getElementById("category-filter");
                cats.forEach((cat) => {
                    const opt = document.createElement("option");
                    opt.value = cat;
                    opt.textContent = CATEGORY_LABELS[cat] || cat;
                    select.appendChild(opt);
                });
            }

            function bindEvents() {
                document
                    .getElementById("search")
                    .addEventListener("input", (e) => {
                        searchQuery = e.target.value.toLowerCase().trim();
                        render();
                    });

                document.querySelectorAll(".filter-btn").forEach((btn) => {
                    btn.addEventListener("click", () => {
                        document
                            .querySelectorAll(".filter-btn")
                            .forEach((b) => b.classList.remove("active"));
                        btn.classList.add("active");
                        activeType = btn.dataset.type;
                        render();
                    });
                });

                document
                    .getElementById("category-filter")
                    .addEventListener("change", (e) => {
                        activeCategory = e.target.value;
                        render();
                    });
            }

            function filterEntries() {
                return allEntries.filter((entry) => {
                    if (activeType !== "all" && entry.type !== activeType)
                        return false;
                    if (
                        activeCategory !== "all" &&
                        entry.category !== activeCategory
                    )
                        return false;
                    if (searchQuery) {
                        const haystack = [
                            entry.name,
                            entry.description,
                            entry.id,
                            entry.author?.name || "",
                            ...entry.tags,
                        ]
                            .join(" ")
                            .toLowerCase();
                        if (!haystack.includes(searchQuery)) return false;
                    }
                    return true;
                });
            }

            function render() {
                const filtered = filterEntries();
                const grid = document.getElementById("entries-grid");
                const empty = document.getElementById("empty-state");
                const count = document.getElementById("results-count");

                count.textContent = `${filtered.length} of ${allEntries.length} entries`;

                if (filtered.length === 0) {
                    grid.classList.add("hidden");
                    empty.classList.remove("hidden");
                    return;
                }

                grid.classList.remove("hidden");
                empty.classList.add("hidden");

                grid.innerHTML = filtered
                    .map((entry, i) => {
                        const typeConf = TYPE_CONFIG[entry.type] || {
                            label: entry.type,
                            bg: "#64647a",
                            text: "#fff",
                            glow: "rgba(100, 100, 122, 0.12)",
                        };
                        const tags = entry.tags.slice(0, 3);
                        const agents = entry.compatibility?.agents;
                        return `
          <article
            class="entry-card bg-brv-surface border border-brv-border rounded-xl p-5 pl-6 flex flex-col cursor-pointer"
            data-type="${entry.type}"
            onclick="openEntry(event, '${entry.path_url}')"
            style="animation-delay: ${i * 50}ms"
          >
            <!-- Type badge & version -->
            <div class="flex items-center justify-between mb-4">
              <span
                class="inline-flex items-center px-2 py-[3px] rounded text-[10px] font-semibold uppercase tracking-wider font-mono"
                style="background: ${typeConf.glow}; color: ${typeConf.bg};"
              >${typeConf.label}</span>
              <span class="text-[11px] font-mono text-brv-dim">v${entry.version}</span>
            </div>

            <!-- ID + Name -->
            <div class="mb-2">
              <h3 class="font-mono font-semibold text-brv-muted text-[14px] leading-snug">${entry.id}</h3>
              <p class="text-lg font-medium text-brv-white mt-1">${entry.name}</p>
            </div>

            <!-- Description -->
            <p class="text-[13px] text-brv-muted leading-relaxed mb-4 flex-1">${entry.description}</p>

            <!-- Tags -->
            <div class="flex flex-wrap gap-1.5 mb-4">
              ${tags.map((tag) => `<span class="tag-pill px-2 py-[2px] rounded text-[10px] font-mono text-brv-dim bg-brv-surface-raised border border-brv-border cursor-default">${tag}</span>`).join("")}
              ${entry.tags.length > 3 ? `<span class="text-[10px] font-mono text-brv-dim self-center">+${entry.tags.length - 3}</span>` : ""}
            </div>

            <!-- Footer -->
            <div class="flex items-center justify-between pt-3 border-t border-brv-border">
              <div class="flex items-center gap-3">
                <span class="text-[11px] text-brv-dim font-medium">${CATEGORY_LABELS[entry.category] || entry.category}</span>
                ${
                    agents
                        ? `
                <div class="flex items-center gap-1" title="${agents.join(", ")}">
                  ${agents
                      .slice(0, 4)
                      .map(() => `<span class="agent-dot"></span>`)
                      .join("")}
                  <span class="text-[10px] text-brv-dim ml-0.5">${agents.length}</span>
                </div>`
                        : ""
                }
              </div>
              <button
                onclick="copyInstall('${entry.id}')"
                class="install-btn flex items-center gap-1.5 px-2.5 py-1 rounded-md border border-brv-border text-[11px] font-mono text-brv-muted"
              >
                <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                install
              </button>
            </div>
          </article>
        `;
                    })
                    .join("");
            }

            function openEntry(event, url) {
                if (event.target.closest("button")) return;
                window.open(url, "_blank", "noopener");
            }

            function copyInstall(id) {
                const cmd = `brv hub install ${id}`;
                navigator.clipboard.writeText(cmd).then(() => {
                    const toast = document.createElement("div");
                    toast.className =
                        "copy-toast fixed bottom-6 left-1/2 -translate-x-1/2 bg-brv-surface-raised border border-brv-border-light text-white text-[12px] font-mono px-4 py-2.5 rounded-lg z-50 shadow-2xl";
                    toast.innerHTML = `<span class="text-brv-dim">Copied:</span> ${cmd}`;
                    document.body.appendChild(toast);
                    setTimeout(() => toast.remove(), 1600);
                });
            }

            init();
        </script>
    </body>
</html>
